<!DOCTYPE html>
<html lang="en">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
        <script type="text/javascript" src="chatGPTFunctions.js"></script>
        <script type="text/javascript">
            //<![CDATA[
            
            //const btn; 
            //let gradeLevelDiv, subjectTxtDiv, lessonTopicDiv;
            //const btn, gradeLevelDiv, subjectTxtDiv, lessonTopicDiv;
            
            /*
            let gradeLevelDiv = (HTMLElement);
            let subjectTxtDiv = (HTMLElement);
            let lessonTopicDiv = (HTMLElement);
            */
            
            // let gradeLevelDiv = (HTMLSelectElement);
            // let subjectTxtDiv = (HTMLFormElement);
            // let lessonTopicDiv = (HTMLFormElement);


            // let btn = document.getElementById("submit-btn");
            // let gradeLevelDiv = document.getElementById("grades");
            // let subjectTxtDiv = document.getElementById('subject-input');
            // let lessonTopicDiv = document.getElementById('lesson-input');

            function init() {                
                //btn = document.getElementById("submit-btn");
                //gradeLevelDiv = document.getElementById("grades");
                //subjectTxtDiv = document.getElementById('subject-input');    
                //lessonTopicDiv = document.getElementById('lesson-input');
                
                
            };

            init();


            //]]>
        </script>
    </head>
    <body>
        <script type="text/javascript">
            //<!CDATA[

            let MATH = "math";
            let DIVISION = "division";

            class Constants {
                MATH = "asfe";
                DIVISION = "division";

                constructor() {
                    this.MATH = "mathematics";
                    this.DIVISION = "multiplication";
                }

                
            }

            (() => {
                //gradeLevelDiv = document.getElementById("grades");
                //alert("GRADES THYEYEYEY: " + document.getElementById('grades'));

                //Constants.MATH;

                this.subjectTxtDiv = document.getElementById('subject-input');    
                this.lessonTopicDiv = document.getElementById('lesson-input');

                //subjectTxtDiv.placeholder = "math";
                //lessonTopicDiv.placeholder = 'division';
            })();

            //]]>
        </script>
        <div id='main'>
            <h1>Generate Your Lesson Plan Today!</h1>
            <h3>Fill out the form below to create customized lesson plans below (featuring results customized by our proprietary VARK Assesment).</h3>
            <br />
            
            
            <!--<label for='ai-form'>Classroom Information:</label>-->
            
            <!--
            <form id='ai-form' action="/chatGPTFunctions.js" onsubmit="makeURLForGPT(gradeLevel, subjectTxt, lessonTopic);"> 
            -->
            <form id='ai-form' action="javascript:console.log('Initializing form...');" onsubmit="makeURLForGPT(grades, subject, topic);"> 
                <ul>
                    <li>
                        <div id='grade-field' class='field'>
                            <label for='grades'>Grade: </label>
                            <select name='grades' id='grades'>
                                <option value='' disabled selected>- Select a grade level -</option>
                                <option value='0'>Kindergarten</option>
                                <option value='1'>1st Grade</option>
                                <option value='2'>2nd Grade</option>
                                <option value='3'>3rd Grade</option>
                                <option value='4'>4th Grade</option>
                                <option value='5'>5th Grade</option>
                                <option value='6'>6th Grade</option>
                                <option value='7'>7th Grade</option>
                                <option value='8'>8th Grade</option>
                                <option value='9'>9th Grade</option>
                                <option value='10'>10th Grade</option>
                                <option value='11'>11th Grade</option>
                                <option value='12'>12th Grade</option>
                                <option value='13'>Post-Secondary</option>
                            </select> 
                        </div>
                    </li>
                    <br />
                    <li>
                        <div id="subject-field" >
                            <label for="subject-input">Subject: </label>
                            <input name="subject" type='text' id='subject-input' placeholder="History"/>
                            <!--<input name="subject" type='text' id='subject-input' placeholder="History" />-->
                        </div>
                    </li>
                    <br />
                    <li>
                        <div id="lesson-field" >
                            <label for='lesson-input'>Lesson Topic: </label>
                            <input name="topic" type='text' id='lesson-input' placeholder="TESTING" />
                            <!--<input name="topic" type='text' id='lesson-input' placeholder="The war of 1812" />-->
                        </div>
                    </li>
            
            <!--
            <li>
                <div id='chatgpt-interface' class='chatgpt'>
                <div id='chatgpt-title' class='chatgpt'>
                <h2>ChatGPT</h2>
            </div>
            </div>
            </li>
            -->
             
                </ul>
                <br />
            
                <!-- <button id='submit-btn' onclick="loadPage()">Submit</button> -->
                <!-- WORKING LATEST <button id='submit-btn' onclick="setupChatGPT(); ">Submit</button> -->
                <button id='submit-btn' onclick="javascript:loadPage();/*  testSubmit()*/">Submit</button>
            </form>
            </div>


            <script type="text/javascript">
                //<![CDATA[
                    (() => {
                        let btn = document.getElementById("submit-btn");
                        
                        let gradeLevelDiv = document.getElementById("grades");
                        let subjectTxtDiv = document.getElementById('subject-input');
                        let lessonTopicDiv = document.getElementById('lesson-input');
                    
                        
                        subjectTxtDiv.placeholder = Constants.MATH;  //"History";
                        lessonTopicDiv.placeholder = Constants.DIVISION;   //"The war of 1812";
    
                        
                        console.log(`Grade level: ${gradeLevelDiv.value}`);
                        console.log(`Subject: ${subjectTxtDiv.value ?? subjectTxtDiv.placeholder}`);
                        console.log(`Lesson topic: ${lessonTopicDiv.value ?? lessonTopicDiv.placeholder}`);
                    })();
    
                    function loadPage() {
                        var btn = document.getElementById("submit-btn");
                        
                        //alert(document.getElementById("subject-input").innerText.toString());
                        //alert();
    
                        var gradeLevel = document.getElementById("grades").value.toString();
                        var subjectTxt = document.getElementById('suject-input').value.toString() ?? document.getElementById('subject-input').placeholder.toString();
                        //var subjectTxt = document.getElementById('suject-input').innerText.toString();
                        
                        //alert(subjectTxt);
                        
                        var lessonTopic = document.getElementById("lesson-input").value.toString() ?? document.getElementById('lesson-input').placeholder.toString();
                    
                        //btn.click();
                        //document.getElementById('');
                        //alert('test');
    
                        alert(`Grade\sLevel:\t${gradeLevel}\nSubject:\t${subjectTxt}\nLesson\sTopic:\t${lessonTopic}`);
                        
                        
                       let rEent = new PromiseRejectionEventInit();


var tmp = (new PromiseRejectionEvent("rejected", PromiseRejectionEventInit), rEvent);

                        



                        return new Promise<HTMLElement>(() => { tmp in rEent }, () => { tmp in rEent
                                alert(tmp);
                        });
                    }
                    
                    //loadPage();
                    
                    (function() {
                        //loadPage();
                    })();
                
                //]]>
                </script>

            
    </body>
</html>